@page files Handling Files in MantisBase

This page describes how file management works in the MantisBase project, including uploading, updating, serving, and deleting files associated with database records.

## File Serving Endpoint

All files stored in the database are accessible via the following endpoint:

```
GET /api/files/<table name>/<filename>
```
- `<table name>`: The name of the table the file is associated with.
- `<filename>`: The name of the file to retrieve.

This endpoint will return the file if it exists, or a 404 error if not found.

## Creating Records with Files

To create a new record that includes file uploads:
- Send a `POST` request to the respective table's API endpoint (e.g., `/api/v1/<table name>`) using `multipart/form-data` (i.e., FormData in JavaScript or similar tools).
- Include file fields as part of the form data. The backend will process and store the files, associating them with the new record.

## Updating Files in Records

To update files associated with a record:
- Send a `PATCH` request to the table's endpoint for the specific record (e.g., `/api/v1/<table name>/<id>`), using `multipart/form-data`.
- Include the new files in the request as you would for other database fields.
- For fields that accept multiple files, include the original files you wish to keep. Any files not included in the update will be deleted from the record and the filesystem.

## Deleting Files

To delete a file from a record:
- Send an `UPDATE` (PATCH) request to the table record, omitting the file name from the relevant field.
- The backend will detect that the file is missing from the update and will remove it from both the database and the filesystem.

## Notes
- Always use the correct table name and field names as defined in your schema.
- For records with multiple files, ensure you pass all files you want to retain; missing files will be deleted.
- File operations are transactional with the record update/creation, ensuring consistency.

For further details, refer to the implementation in `src/core/tables/tables_routes.cpp` and `src/core/tables/tables_crud.cpp`.
