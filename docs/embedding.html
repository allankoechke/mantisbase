<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MantisBase: Embedding MantisBase</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MantisBase<span id="projectnumber">&#160;v0.3.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('embedding.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Embedding MantisBase</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MantisBase is designed as a lightweight C++ library that can be embedded directly into your desktop, mobile, or embedded application. This guide explains how to integrate MantisBase into your project and configure it.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md154"></a>
Why Embed MantisBase?</h2>
<ul>
<li>Add full-featured local storage and REST API support to your Qt, Slint, or CLI app</li>
<li>Serve data to local UI components through HTTP or direct C++ API calls</li>
<li>Retain full control of the application lifecycle and logic</li>
<li>No separate server deployment required</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md156"></a>
Dependencies</h2>
<p>On Linux, MantisBase depends on ZSTD and libpq for PostgreSQL support:</p>
<div class="fragment"><div class="line">sudo apt-get install -y libzstd-dev</div>
<div class="line">sudo apt install libpq-dev</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md158"></a>
Integration</h2>
<h3><a class="anchor" id="autotoc_md159"></a>
As a Static or Shared Library</h3>
<p>Add MantisBase as a submodule or include it in your CMake project:</p>
<div class="fragment"><div class="line">add_subdirectory(mantisbase)</div>
<div class="line">target_link_libraries(your_app PRIVATE mantisbase)</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md161"></a>
Basic Usage</h2>
<h3><a class="anchor" id="autotoc_md162"></a>
Using Command-Line Arguments</h3>
<p>The simplest way to embed MantisBase is using command-line arguments:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>(argc, argv);</div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
<div class="ttc" id="aclassmb_1_1MantisBase_html_a4d7db711bdbc3422e44c2138b71a155c"><div class="ttname"><a href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a></div><div class="ttdeci">static MantisBase &amp; create(int argc, char **argv)</div><div class="ttdoc">Create class instance given cmd args passed in.</div><div class="ttdef"><b>Definition</b> mantisbase.cpp:56</div></div>
<div class="ttc" id="amain_8cpp_html_a638b85ceffac097c2aa79b76ba8c055e"><div class="ttname"><a href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a></div><div class="ttdeci">int main(const int argc, char *argv[])</div><div class="ttdoc">MantisApp standalone entrypoint.</div><div class="ttdef"><b>Definition</b> main.cpp:16</div></div>
<div class="ttc" id="amantisbase_8h_html"><div class="ttname"><a href="mantisbase_8h.html">mantisbase.h</a></div><div class="ttdoc">The main application for mantisbase.</div></div>
</div><!-- fragment --><p>This allows your application to accept standard MantisBase CLI arguments like <code>--port</code>, <code>--host</code>, <code>--database</code>, etc.</p>
<h3><a class="anchor" id="autotoc_md163"></a>
Using JSON Configuration</h3>
<p>For more control when embedding, use JSON configuration:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a> config;</div>
<div class="line">    config[<span class="stringliteral">&quot;dev&quot;</span>] = <span class="keyword">true</span>;</div>
<div class="line">    config[<span class="stringliteral">&quot;serve&quot;</span>] = {</div>
<div class="line">        {<span class="stringliteral">&quot;port&quot;</span>, 8080},</div>
<div class="line">        {<span class="stringliteral">&quot;host&quot;</span>, <span class="stringliteral">&quot;127.0.0.1&quot;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;poolSize&quot;</span>, 5}</div>
<div class="line">    };</div>
<div class="line">    config[<span class="stringliteral">&quot;dataDir&quot;</span>] = <span class="stringliteral">&quot;./data&quot;</span>;</div>
<div class="line">    config[<span class="stringliteral">&quot;publicDir&quot;</span>] = <span class="stringliteral">&quot;./public&quot;</span>;</div>
<div class="line">    config[<span class="stringliteral">&quot;scriptsDir&quot;</span>] = <span class="stringliteral">&quot;./scripts&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>(config);</div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
<div class="ttc" id="anamespacemb_html_afff330d3a64f28304acd2ec11dd1f71d"><div class="ttname"><a href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdoc">Shorten JSON namespace.</div><div class="ttdef"><b>Definition</b> context_store.h:18</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md164"></a>
Minimal Configuration</h3>
<p>You can also create an instance with default settings:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Uses all defaults (port 7070, SQLite, etc.)</span></div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>();</div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md166"></a>
Configuration Options</h2>
<p>The JSON configuration supports the following options:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;database&quot;: &quot;SQLITE&quot;,           // or &quot;PSQL&quot;</div>
<div class="line">  &quot;connection&quot;: &quot;connection_string&quot;, // For PSQL: &quot;dbname=db user=user password=pass&quot;</div>
<div class="line">  &quot;dataDir&quot;: &quot;./data&quot;,            // Directory for SQLite DB and files</div>
<div class="line">  &quot;publicDir&quot;: &quot;./public&quot;,         // Static file serving directory</div>
<div class="line">  &quot;scriptsDir&quot;: &quot;./scripts&quot;,       // JavaScript scripts directory</div>
<div class="line">  &quot;dev&quot;: true,                    // Enable development mode</div>
<div class="line">  &quot;serve&quot;: {</div>
<div class="line">    &quot;port&quot;: 7070,                 // HTTP server port</div>
<div class="line">    &quot;host&quot;: &quot;127.0.0.1&quot;,          // HTTP server host</div>
<div class="line">    &quot;poolSize&quot;: 2                 // Database connection pool size</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>All options are optional and will use sensible defaults if omitted.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md168"></a>
Adding Custom Routes</h2>
<p>You can add custom API endpoints using the router:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="middlewares_8h.html">mantisbase/core/middlewares.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>();</div>
<div class="line">    <span class="keyword">auto</span>&amp; router = app.router();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Simple GET endpoint</span></div>
<div class="line">    router.Get(<span class="stringliteral">&quot;/api/v2/custom&quot;</span>, [](<a class="code hl_class" href="classmb_1_1MantisRequest.html">mb::MantisRequest</a>&amp; req, <a class="code hl_class" href="classmb_1_1MantisResponse.html">mb::MantisResponse</a>&amp; res) {</div>
<div class="line">        res.<a class="code hl_function" href="classmb_1_1MantisResponse.html#af104ef1181023634e19eac48c5f1a34f">sendJSON</a>(200, {{<span class="stringliteral">&quot;message&quot;</span>, <span class="stringliteral">&quot;Custom endpoint&quot;</span>}});</div>
<div class="line">    });</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// POST endpoint with admin authentication</span></div>
<div class="line">    router.Post(<span class="stringliteral">&quot;/api/v2/admin/stats&quot;</span>, [](<a class="code hl_class" href="classmb_1_1MantisRequest.html">mb::MantisRequest</a>&amp; req, <a class="code hl_class" href="classmb_1_1MantisResponse.html">mb::MantisResponse</a>&amp; res) {</div>
<div class="line">        <a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a> stats = {{<span class="stringliteral">&quot;users&quot;</span>, 100}, {<span class="stringliteral">&quot;posts&quot;</span>, 500}};</div>
<div class="line">        res.<a class="code hl_function" href="classmb_1_1MantisResponse.html#af104ef1181023634e19eac48c5f1a34f">sendJSON</a>(200, stats);</div>
<div class="line">    }, {<a class="code hl_function" href="namespacemb.html#ab7c5922d7edd2da97857b5383049101f">mb::requireAdminAuth</a>()});</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// GET endpoint with entity authentication</span></div>
<div class="line">    router.Get(<span class="stringliteral">&quot;/api/v2/users/profile&quot;</span>, [](<a class="code hl_class" href="classmb_1_1MantisRequest.html">mb::MantisRequest</a>&amp; req, <a class="code hl_class" href="classmb_1_1MantisResponse.html">mb::MantisResponse</a>&amp; res) {</div>
<div class="line">        <span class="keyword">auto</span> auth = req.<a class="code hl_function" href="classmb_1_1MantisRequest.html#acc5060d875c76ef1177d77426f4b33b4">getOr</a>&lt;<a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a>&gt;(<span class="stringliteral">&quot;auth&quot;</span>, mb::json::object());</div>
<div class="line">        std::string userId = auth[<span class="stringliteral">&quot;id&quot;</span>];</div>
<div class="line">        <span class="comment">// ... fetch and return user profile</span></div>
<div class="line">        res.<a class="code hl_function" href="classmb_1_1MantisResponse.html#af104ef1181023634e19eac48c5f1a34f">sendJSON</a>(200, {{<span class="stringliteral">&quot;user_id&quot;</span>, userId}});</div>
<div class="line">    }, {<a class="code hl_function" href="namespacemb.html#ae3903a4fb6e5f572be9884d6768da4fc">mb::requireEntityAuth</a>(<span class="stringliteral">&quot;users&quot;</span>)});</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
<div class="ttc" id="aclassmb_1_1MantisRequest_html"><div class="ttname"><a href="classmb_1_1MantisRequest.html">mb::MantisRequest</a></div><div class="ttdoc">A wrapper class around httplib::Request offering a consistent API and allowing for easy wrapper metho...</div><div class="ttdef"><b>Definition</b> http.h:42</div></div>
<div class="ttc" id="aclassmb_1_1MantisRequest_html_acc5060d875c76ef1177d77426f4b33b4"><div class="ttname"><a href="classmb_1_1MantisRequest.html#acc5060d875c76ef1177d77426f4b33b4">mb::MantisRequest::getOr</a></div><div class="ttdeci">T &amp; getOr(const std::string &amp;key, T default_value)</div><div class="ttdoc">Get value from context store or return default.</div><div class="ttdef"><b>Definition</b> http.h:288</div></div>
<div class="ttc" id="aclassmb_1_1MantisResponse_html"><div class="ttname"><a href="classmb_1_1MantisResponse.html">mb::MantisResponse</a></div><div class="ttdoc">Wrapper around httplib::Response for consistent API.</div><div class="ttdef"><b>Definition</b> http.h:318</div></div>
<div class="ttc" id="aclassmb_1_1MantisResponse_html_af104ef1181023634e19eac48c5f1a34f"><div class="ttname"><a href="classmb_1_1MantisResponse.html#af104ef1181023634e19eac48c5f1a34f">mb::MantisResponse::sendJSON</a></div><div class="ttdeci">void sendJSON(int statusCode=200, const json &amp;data=json::object()) const</div><div class="ttdoc">Send JSON response.</div><div class="ttdef"><b>Definition</b> http_response.cpp:145</div></div>
<div class="ttc" id="amiddlewares_8h_html"><div class="ttname"><a href="middlewares_8h.html">middlewares.h</a></div><div class="ttdoc">Middleware functions for request processing.</div></div>
<div class="ttc" id="anamespacemb_html_ab7c5922d7edd2da97857b5383049101f"><div class="ttname"><a href="namespacemb.html#ab7c5922d7edd2da97857b5383049101f">mb::requireAdminAuth</a></div><div class="ttdeci">std::function&lt; HandlerResponse(MantisRequest &amp;, MantisResponse &amp;)&gt; requireAdminAuth()</div><div class="ttdoc">Require admin authentication.</div><div class="ttdef"><b>Definition</b> middlewares.cpp:299</div></div>
<div class="ttc" id="anamespacemb_html_ae3903a4fb6e5f572be9884d6768da4fc"><div class="ttname"><a href="namespacemb.html#ae3903a4fb6e5f572be9884d6768da4fc">mb::requireEntityAuth</a></div><div class="ttdeci">std::function&lt; HandlerResponse(MantisRequest &amp;, MantisResponse &amp;)&gt; requireEntityAuth(const std::string &amp;entity_name)</div><div class="ttdoc">Require entity-specific authentication.</div><div class="ttdef"><b>Definition</b> middlewares.cpp:381</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md170"></a>
Accessing Database</h2>
<p>You can access the database directly for custom operations:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;soci/soci.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Get a database session</span></div>
<div class="line">    <span class="keyword">auto</span> sql = app.db().session();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Execute queries</span></div>
<div class="line">    soci::row row;</div>
<div class="line">    *sql &lt;&lt; <span class="stringliteral">&quot;SELECT * FROM users WHERE id = :id&quot;</span>, </div>
<div class="line">         soci::use(<span class="stringliteral">&quot;user123&quot;</span>), </div>
<div class="line">         soci::into(row);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (sql-&gt;got_data()) {</div>
<div class="line">        <span class="comment">// Process row data</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md172"></a>
Working with Entities</h2>
<p>You can interact with entities programmatically:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Get an entity</span></div>
<div class="line">    <span class="keyword">auto</span> users = app.entity(<span class="stringliteral">&quot;users&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create a record</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a> newUser = {</div>
<div class="line">        {<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;John Doe&quot;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;email&quot;</span>, <span class="stringliteral">&quot;john@example.com&quot;</span>}</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">auto</span> created = users.create(newUser);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// List records</span></div>
<div class="line">    <span class="keyword">auto</span> allUsers = users.list();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Read a record</span></div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span> user = users.read(<span class="stringliteral">&quot;user123&quot;</span>); user.has_value()) {</div>
<div class="line">        <span class="comment">// Process user data</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Update a record</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a> updates = {{<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;Jane Doe&quot;</span>}};</div>
<div class="line">    <span class="keyword">auto</span> updated = users.update(<span class="stringliteral">&quot;user123&quot;</span>, updates);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Delete a record</span></div>
<div class="line">    users.remove(<span class="stringliteral">&quot;user123&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md174"></a>
Project Structure</h2>
<p>A typical embedded project structure:</p>
<div class="fragment"><div class="line">your-app/</div>
<div class="line">├── main.cpp</div>
<div class="line">├── CMakeLists.txt</div>
<div class="line">├── data/              # SQLite database and files (created automatically)</div>
<div class="line">├── public/            # Static assets (optional)</div>
<div class="line">├── scripts/           # JavaScript extensions (optional)</div>
<div class="line">└── mantisbase/        # MantisBase submodule</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md176"></a>
Using as a Submodule</h2>
<p>Add MantisBase as a git submodule:</p>
<div class="fragment"><div class="line">git submodule add https://github.com/allankoechke/mantisbase.git</div>
<div class="line">git submodule update --init --recursive</div>
</div><!-- fragment --><p>Then include it in your CMakeLists.txt:</p>
<div class="fragment"><div class="line">add_subdirectory(mantisbase)</div>
<div class="line">target_link_libraries(your_app PRIVATE mantisbase)</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md178"></a>
Testing Embedded APIs</h2>
<p>Once your app is running, test the APIs:</p>
<div class="fragment"><div class="line"># Test entity endpoints</div>
<div class="line">curl http://localhost:7070/api/v1/entities/users</div>
<div class="line"> </div>
<div class="line"># Test custom endpoints</div>
<div class="line">curl http://localhost:7070/api/v1/custom</div>
<div class="line"> </div>
<div class="line"># Test with authentication</div>
<div class="line">curl -H &quot;Authorization: Bearer &lt;token&gt;&quot; \</div>
<div class="line">     http://localhost:7070/api/v1/entities/posts</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md180"></a>
Notes</h2>
<ul>
<li>MantisBase APIs respect all access rules and authentication even in embedded mode</li>
<li>The <code>run()</code> method is blocking - use a separate thread if you need non-blocking behavior</li>
<li>All entity endpoints follow the pattern <code>/api/v1/entities/&lt;entity_name&gt;</code></li>
<li>Authentication endpoints are at <code>/api/v1/auth/*</code></li>
<li>Schema management endpoints are at <code>/api/v1/schemas/*</code> (admin only)</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md182"></a>
Complete Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mantisbase_8h.html">mantisbase/mantisbase.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="middlewares_8h.html">mantisbase/core/middlewares.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#a638b85ceffac097c2aa79b76ba8c055e">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Configure using JSON</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacemb.html#afff330d3a64f28304acd2ec11dd1f71d">mb::json</a> config;</div>
<div class="line">    config[<span class="stringliteral">&quot;dev&quot;</span>] = <span class="keyword">true</span>;</div>
<div class="line">    config[<span class="stringliteral">&quot;serve&quot;</span>] = {{<span class="stringliteral">&quot;port&quot;</span>, 8080}};</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">auto</span>&amp; app = <a class="code hl_function" href="classmb_1_1MantisBase.html#a4d7db711bdbc3422e44c2138b71a155c">mb::MantisBase::create</a>(config);</div>
<div class="line">    <span class="keyword">auto</span>&amp; router = app.router();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Add custom route</span></div>
<div class="line">    router.Get(<span class="stringliteral">&quot;/api/v1/hello&quot;</span>, [](<a class="code hl_class" href="classmb_1_1MantisRequest.html">mb::MantisRequest</a>&amp; req, <a class="code hl_class" href="classmb_1_1MantisResponse.html">mb::MantisResponse</a>&amp; res) {</div>
<div class="line">        res.<a class="code hl_function" href="classmb_1_1MantisResponse.html#af104ef1181023634e19eac48c5f1a34f">sendJSON</a>(200, {{<span class="stringliteral">&quot;message&quot;</span>, <span class="stringliteral">&quot;Hello from embedded MantisBase!&quot;</span>}});</div>
<div class="line">    });</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Start server (blocking)</span></div>
<div class="line">    <span class="keywordflow">return</span> app.run();</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md184"></a>
Summary</h2>
<p>By embedding MantisBase, you gain powerful backend features including database storage, authentication, and REST APIs without requiring a separate server deployment. The library integrates seamlessly into your C++ application with minimal configuration. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
